<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мем Рація</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0e1621;
      color: #fff;
    }

    header {
      text-align: center;
      padding: 40px 20px 20px;
    }

    h1 {
      font-size: 48px;
      margin-bottom: 10px;
    }

    p.sub {
      font-size: 20px;
      color: #ccc;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .hero {
      display: flex;
      justify-content: space-around;
      align-items: stretch;
      flex-wrap: wrap;
      gap: 30px;
      margin-top: 40px;
      text-align: center;
    }

    .hero-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      flex: 1 1 300px;
      padding-bottom: 20px;
    }

    .hero img {
      max-width: 220px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }

    .cta {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn-yellow {
      background-color: #ffd000;
      color: #000;
    }

    .btn-yellow:hover {
      background-color: #ffbf00;
    }

    .btn-dark {
      background-color: #333;
      color: #fff;
    }

    .btn-dark:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <header>
    <h1>МЕМ РАЦІЯ</h1>
    <p class="sub">Пересилайте меми за допомогою рації</p>
  </header>

  <div class="container">
    <div class="hero">
      <div class="hero-item">
        <img src="/image/image.png" alt="Реальна рація">
        <p style="margin-top: 10px;">Реальна версія Rolton T1</p>
        <div style="flex-grow: 1"></div>
        <a href="#order" class="btn btn-yellow" style="margin-top: auto; text-decoration: none; display: inline-block;">КУПИТИ РАЦІЮ</a>
      </div>
      <div class="hero-item">
        <img src="/image/logo-full.png" alt="Стилізована рація">
        <p style="margin-top: 10px;">Наша мемна версія</p>
        <div style="flex-grow: 1"></div>
        <a href="/" class="btn btn-dark" style="margin-top: auto; text-decoration: none; display: inline-block;">СПРОБУВАТИ ONLINE</a>
      </div>
    </div>
  </div>

  <div id="order" class="container" style="margin-top: 60px;">
    <h2 style="text-align: center; font-size: 32px; margin-bottom: 20px;">Замовити Мем Рацію</h2>
    <p style="text-align: center; font-size: 18px; color: #ccc; max-width: 700px; margin: 0 auto 30px;">
      Ціна: <strong>799₴</strong><br>
      У комплекті: зарядка, інструкція, 50+ вбудованих мемів, Bluetooth/FM/MP3<br>
      Доставка Новою Поштою по Україні
    </p>
    <form style="max-width: 500px; margin: 0 auto; display: flex; flex-direction: column; gap: 15px;">
      <input type="text" placeholder="Ваше ім’я" required style="padding: 12px; border-radius: 8px; border: none; font-size: 16px;">
      <input type="tel" placeholder="Номер телефону" required style="padding: 12px; border-radius: 8px; border: none; font-size: 16px;">
      <select required style="padding: 12px; border-radius: 8px; border: none; font-size: 16px;">
        <option value="">Оберіть відділення Нової Пошти</option>
        <option value="Київ, відділення №1">Київ, відділення №1</option>
        <option value="Київ, відділення №2">Київ, відділення №2</option>
        <option value="Львів, відділення №3">Львів, відділення №3</option>
        <option value="Львів, відділення №4">Львів, відділення №4</option>
        <option value="Харків, відділення №5">Харків, відділення №5</option>
        <option value="Одеса, відділення №6">Одеса, відділення №6</option>
        <!-- можна довантажити динамічно через API НП у майбутньому -->
      </select>
      <button class="btn btn-yellow" type="submit">НАДІСЛАТИ ЗАМОВЛЕННЯ</button>
    </form>
  </div>

<script>
  const apiKey = '5fda3ac6c1299b7f132bcfb69b45fc0a'; // Замінити на свій ключ

  async function fetchCities(query) {
    const response = await fetch('https://api.novaposhta.ua/v2.0/json/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        apiKey,
        modelName: 'Address',
        calledMethod: 'getCities',
        methodProperties: { FindByString: query }
      })
    });
    const data = await response.json();
    return data.data;
  }

  async function fetchWarehouses(cityRef) {
    const response = await fetch('https://api.novaposhta.ua/v2.0/json/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        apiKey,
        modelName: 'AddressGeneral',
        calledMethod: 'getWarehouses',
        methodProperties: {
          CityRef: cityRef
        }
      })
    });
    const data = await response.json();
    return data.data;
  }

  document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('form');

    const cityInput = document.createElement('input');
    cityInput.setAttribute('type', 'text');
    cityInput.setAttribute('placeholder', 'Місто (почніть вводити)');
    cityInput.required = true;
    cityInput.style = 'padding: 12px; border-radius: 8px; border: none; font-size: 16px;';

    const warehouseSelect = form.querySelector('select');
    warehouseSelect.innerHTML = '<option value="">Спочатку оберіть місто...</option>';

    form.insertBefore(cityInput, warehouseSelect);

    let cityList = [];
    let selectedCityRef = null;

    cityInput.addEventListener('input', async () => {
      const value = cityInput.value.trim();
      if (value.length < 3) return;
      cityList = await fetchCities(value);
      if (cityList.length > 0) {
        const firstCity = cityList[0];
        selectedCityRef = firstCity.Ref;
        const warehouses = await fetchWarehouses(selectedCityRef);
        warehouseSelect.innerHTML = '<option value="">Оберіть відділення</option>';
        warehouses.forEach(w => {
          const opt = document.createElement('option');
          opt.value = w.Description;
          opt.textContent = w.Description;
          warehouseSelect.appendChild(opt);
        });
      }
    });
  });
// Надсилання форми до Google Sheets і email
  const orderForm = document.querySelector('form');
  orderForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = orderForm.querySelector('input[placeholder="Ваше ім’я"]').value;
    const phone = orderForm.querySelector('input[placeholder="Номер телефону"]').value;
    const city = orderForm.querySelector('input[placeholder^="Місто"]').value;
    const branch = orderForm.querySelector('select').value;

    const payload = { name, phone, city, branch };

    const response = await fetch("https://script.google.com/macros/s/AKfycbzItn-FvSysOrfxa6Ude_Ljv96kUVz1gvlW0h2dFARZZGRqC7xY271OB4SEkL9PzUK1/exec", {
      method: "POST",
      body: JSON.stringify(payload),
      headers: {
        "Content-Type": "application/json",
      },
    });

    if (response.ok) {
      alert("Дякуємо! Замовлення надіслано ✅");
      orderForm.reset();
    } else {
      alert("Помилка при надсиланні. Спробуйте ще раз.");
    }
  });
</script>
</body>
</html>
